(function(t,e){define(["./xf.core","jquery"],function(t,e){var i=e.fn.hide;e.fn.hide=function(){var t=i.apply(this,arguments);return t};var n=e.fn.show;e.fn.show=function(){var i=n.apply(this,arguments);return e(this).find("[data-component]").length&&t.trigger("xf:loadChildComponents",this),i};var a=e.fn.html;e.fn.html=function(){var i=a.apply(this,arguments);return e(this).find("[data-component]").length&&t.trigger("xf:loadChildComponents",this),i};var s=e.fn.append;e.fn.append=function(){var i=s.apply(this,arguments);return e(this).find("[data-component]").length&&t.trigger("xf:loadChildComponents",this),i};var o=e.fn.prepend;e.fn.prepend=function(){var i=o.apply(this,arguments);return e(this).find("[data-component]").length&&t.trigger("xf:loadChildComponents",this),i},e.fn.animationEnd=function(t){var i="webkitAnimationEnd oAnimationEnd msAnimationEnd animationend";return e(this).one(i,t),this}}),define(["jquery","underscore","backbone"],function(e,i,n){var a=e("body"),s=t.XF=t.XF||{};s.Events=n.Events,i.extend(s,s.Events),s.navigate=function(t){s.router.navigate(t,{trigger:!0})},s.on("navigate",s.navigate),s.on("all",function(t){var e,n=/\:/;if(n.test(t)&&(e=t.split(n),!("component"!==e[0]&&3>e.length))){var a=e[1];if(s._defferedCompEvents||(s._defferedCompEvents={}),"component"===e[0]&&"rendered"===e[2]&&o(a),!s.getComponentByID(a)){var r=s._defferedCompEvents[a]||(s._defferedCompEvents[a]=[]);r.push(t),s.on("component:"+a+":constructed",function(){i.each(r,function(t){s.trigger(t)})})}}});var o=function(t){var n=e(s.getComponentByID(t).selector());i.has(s,"pages")&&(s.pages.status.started||s.trigger("pages:start",n))};s.start=function(t){t.device=t.device||{},s.device.init(t.device.types),t=t||{},t.history=t.history||{pushState:!1},s.storage.init(),"touch"in s&&s.touch.init(),t.router=t.router||{},r(t.router),l(),i.has(s,"ui")&&s.ui.init(),s.router.start(t.history),t.animations=t.animations||{},t.animations.standardAnimation=t.animations.standardAnimation||"",i.has(s.device.type,"defaultAnimation")&&(t.animations.standardAnimation=s.device.type.defaultAnimation,console.log("Options.animations",t.animations)),s.pages.init(t.animations),c(a),s.on("xf:loadChildComponents",s.loadChildComponents),s.trigger("app:started")};var r=function(t){if(s.router)throw"XF.createRouter can be called only ONCE!";s.router=new(s.Router.extend(t))},l=function(){e("body").on("tap click","[data-href]",function(){var t=e(this).data("animation")||null;t&&s.trigger("pages:animation:next",t),s.router.navigate(e(this).data("href"),{trigger:!0})})},c=s.loadChildComponents=function(t){if(e(t).attr("data-component")&&e(t).is(":visible")&&(!e(t).attr("data-device-type")||e(t).attr("data-device-type")==s.device.type.name)){var i=e(t).attr("data-id"),n=e(t).attr("data-component");d(i,n)}e(t).find("[data-component][data-cache=true],[data-component]:visible").each(function(t,i){if(!e(i).attr("data-device-type")||e(i).attr("data-device-type")==s.device.type.name){var n=e(i).attr("data-id"),a=e(i).attr("data-component");n&&a&&d(n,a)}})},d=function(t,e){s.define([s.settings.property("componentUrl")(e)],function(n){if(!u[t]&&i.isFunction(n)){var a=new n(e,t);u[t]=a,a._constructor()}})},u={};s.getComponentByID=function(t){return u[t]},s._removeComponents=function(t){i.isEmpty(t)||i.each(t,function(t){u=i.omit(u,t)})};var p={},h={},f=document.getElementsByTagName("base")[0],m=document.getElementsByTagName("head")[0],g=function(){console.log(h),i.each(h,function(t,e){console.log(t,e);var n=t[0],a=t[1],s=t[2],o=[];i.each(a,function(t){var e=v(t);void 0!==p[e]&&(console.log(e,p[e]),o.push(p[e]))}),(a.length===o.length||0===a.length)&&(console.log("NAME",n),null!==n&&(console.log("EXEC",n),delete h[n],p[n]=s.apply(this,o)))})},v=function(t){var e=t.split(/\//);return e[e.length-1].replace(".js","")},x=function(t){var e=v(t),i=t.push?t[1]:t;return console.log("parse files",t,i,e),p[e]?(g(),void 0):(/\.js/.test(i)||/^http/.test(i)||(i=i.replace(".","/"),i+=".js"),w(e,i),void 0)},b=function(t){var e,i=t.currentTarget||t.srcElement;("load"===t.type||"complete"==i.readyState)&&(e=i.getAttribute("data-module"),i.setAttribute("data-loaded",!0),i.attachEvent?i.detachEvent("onreadystatechange",b):i.removeEventListener("load",b),g())},y=function(t){t.attachEvent?t.attachEvent("onreadystatechange",b):t.addEventListener("load",b,!1)},C=function(t){var e=!1;return i.each(document.getElementsByTagName("script"),function(i){return i.getAttribute("data-module")&&i.getAttribute("data-module")===t?(e=i,!1):void 0}),e},w=function(t,e){setTimeout(function(){var i=C(t);i||(i=document.createElement("script"),i.async=!0,i.type="text/javascript",i.src=e,i.setAttribute("data-module",t),i.setAttribute("data-loaded",!1),f?f.parentNode.insertBefore(i,f):m.appendChild(i),y(i))},0)};s.define=s.require=s.defineComponent=function(t,e,n){"string"!=typeof t&&(n=e,e=t,t=s.utils.uniqueID()),"object"!=typeof e&&(n=e,e=[]),void 0===h[t]&&(h[t]=[t,e,n],g(),e.length&&i.each(e,x))},s.getRegisteredModules=function(){return p};var T={};return s.setOptionsByID=function(t,e){T[t]=e},s.getOptionsByID=function(t){return T[t]||{}},s.history=n.history,s}),define(["./xf.core","underscore","backbone","./xf.settings"],function(t,e,i){return t.App=function(i){i=i||{},i.device=i.device||{},this.initialize=i.initialize||this.initialize,e.extend(t.settings,i.settings),this.initialize(),t.start(i)},e.extend(t.App.prototype,t.Events),e.extend(t.App.prototype,{initialize:function(){}}),t.App.extend=i.Model.extend,t}),define(["./xf.core","jquery","./xf.device"],function(e,i){return e.touch={init:function(){var n,a,s={},o={mouse:{start:"mousedown",move:"mousemove",end:"mouseup",cancel:"mouseup"},pointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp",cancel:"MSPointerCancel"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}},r=30;n=e.device.supports.pointerEvents?!1:e.device.supports.touchEvents?!0:!1,a=e.device.supports.pointerEvents?"pointer":e.device.supports.touchEvents?"touch":"mouse";var l=function(t){return"tagName"in t?t:t.parentNode},c=function(t,e,i,n){var a=Math.abs(t-e),s=Math.abs(i-n);return a>=s?t-e>0?"Left":"Right":i-n>0?"Up":"Down"},d=function(){s={}};i(document).ready(function(){var e,u;i(document.body).bind(o[a].start,function(t){e=Date.now(),u=e-(s.last||e),s.el=i(l(n?t.originalEvent.targetTouches[0].target:t.originalEvent.target)),s.x1=n?t.originalEvent.targetTouches[0].clientX:t.originalEvent.clientX,s.y1=n?t.originalEvent.targetTouches[0].clientY:t.originalEvent.clientY,s.last=e}).bind(o[a].move,function(t){s.x2=n?t.originalEvent.targetTouches[0].clientX:t.originalEvent.clientX,s.y2=n?t.originalEvent.targetTouches[0].clientY:t.originalEvent.clientY,Math.abs(s.x1-s.x2)>10&&t.preventDefault()}).bind(o[a].end,function(){s.x2&&Math.abs(s.x1-s.x2)>r||s.y2&&Math.abs(s.y1-s.y2)>r?(s.direction=c(s.x1,s.x2,s.y1,s.y2),s.el.trigger("swipe"),s.el.trigger("swipe"+s.direction),s={}):"last"in s&&(s.el.trigger("tap"),i(document.body).unbind("click"),s.el.unbind("click"))}),i(t).bind("scroll",d)}),i.each(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","tap"],function(t,e){i.fn[e]=function(t){return this.bind(e,t)}})}},e}),define(["./xf.core","jquery","underscore","backbone","./xf.pages"],function(t,e,i,n){return t.router=null,t.Router=n.Router,i.extend(t.Router.prototype,{start:function(i){this.bindAnyRoute(),t.history.start(i),t.trigger("ui:enhance",e("body"))},bindAnyRoute:function(){this.on("route",function(){console.log("XF.router :: route: ",this.getPageNameFromFragment(t.history.fragment)),t.pages&&t.pages.show(this.getPageNameFromFragment(t.history.fragment))})},getPageNameFromFragment:function(t){var e=t.replace(/^\/+/,"").replace(/\/+$/,"").split("/");return e[0]}}),t}),define(["./xf.core","underscore","./xf.device"],function(e,i){return e.utils={},e.utils.addressBar={},e.utils.uniqueID=function(){return"xf-"+Math.floor(1e5*Math.random())},i.extend(e.utils.addressBar,{BODY_SCROLL_TOP:!1,getScrollTop:function(){var e=t,i=document;return e.pageYOffset||"CSS1Compat"===i.compatMode&&i.documentElement.scrollTop||i.body.scrollTop||0},hide:function(){console.log("XF :: utils :: addressBar :: hide");var i=t;if(location.hash||e.utils.addressBar.BODY_SCROLL_TOP===!1||i.scrollTo(0,1===e.utils.addressBar.BODY_SCROLL_TOP?0:1),e.device.isMobile){var n=document.documentElement.style;return n.height="200%",n.overflow="visible",t.scrollTo(0,1),n.height=t.innerHeight+"px",!0}},hideOnLoad:function(){console.log("XF :: utils :: addressBar :: hideOnLoad");var i=t,n=i.document;!location.hash&&i.addEventListener&&(t.scrollTo(0,1),e.utils.addressBar.BODY_SCROLL_TOP=1,bodycheck=setInterval(function(){n.body&&(clearInterval(bodycheck),e.utils.addressBar.BODY_SCROLL_TOP=e.utils.addressBar.getScrollTop())},15),i.addEventListener("load",function(){setTimeout(function(){20>e.utils.addressBar.getScrollTop()},0)}))}}),e}),define(["./xf.core","jquery","underscore","./xf.device"],function(t,e,i){var n=e("body");return t.pages={status:{started:!1},pageClass:"xf-page",activePageClass:"xf-page-active",animations:{standardAnimation:"slideleft",next:null,types:{none:{fallback:function(t,e){t.removeClass(this.activePageClass),e.addClass(this.activePageClass)}},fade:{fallback:function(t,i){e(t).removeClass(this.activePageClass),e(i).addClass(this.activePageClass)}},slideleft:{fallback:function(t,i){e(t).removeClass(this.activePageClass),e(i).addClass(this.activePageClass)}},slideright:{fallback:function(t,i){e(t).removeClass(this.activePageClass),e(i).addClass(this.activePageClass)}}}},activePage:null,activePageName:"",init:function(e){t.on("pages:show",i.bind(t.pages.show,t.pages)),t.on("pages:animation:next",i.bind(t.pages.setNextAnimationType,t.pages)),t.on("pages:animation:default",i.bind(t.pages.setDefaultAnimationType,t.pages)),t.on("pages:start",i.bind(t.pages.start,t.pages)),i.has(e,"types")&&i.extend(this.animations.types,e.types),i.has(e,"standardAnimation")&&this.setDefaultAnimationType(e.standardAnimation),this.start()},start:function(i){if(!this.status.started){i=i||e("body");var n=i.find(" ."+this.pageClass);if(n.length){var a=n.filter("."+this.activePageClass);a.length?(this.activePage=a,this.activePageName=a.attr("id")):this.show(n.first()),t.off("pages:start"),this.status.started=!0}}},setDefaultAnimationType:function(e){t.pages.animations.types[e]&&(t.pages.animations.standardAnimation=e)},setNextAnimationType:function(e){t.pages.animations.types[e]&&(t.pages.animations.next=e)},show:function(a,s){if(a!==this.activePageName){if(""===a){var o=n.find(" ."+this.pageClass);return o.length&&this.show(o.first()),void 0}var r=a instanceof e?a:e("."+t.pages.pageClass+"#"+a);if((!this.activePage||r.attr("id")!=this.activePage.attr("id"))&&r.length){console.log("XF.pages :: showing page",r.attr("id"));var l=t.device.getViewport();t.device.getScreenHeight(),this.animations.next?(s=this.animations.types[this.animations.next]?this.animations.next:this.animations.standardAnimation,this.animations.next=null):s=this.animations.types[s]?s:this.animations.standardAnimation;var c=this.activePage,d=r;this.activePage=d,this.activePageName=r.attr("id"),t.device.supports.cssAnimations?c?(l.addClass("xf-viewport-transitioning"),c.height(l.height()).addClass("out "+s),d.height(l.height()).addClass("in "+s+" "+this.activePageClass),c.animationEnd(function(){c.height("").removeClass(s+" out in"),c.removeClass(t.pages.activePageClass)}),d.animationEnd(function(){d.height("").removeClass(s+" out in"),l.removeClass("xf-viewport-transitioning")})):this.activePage.addClass(this.activePageClass):i.isFunction(this.animations.types[s].fallback)&&i.bind(this.animations.types[s].fallback,this)(c,d),t.trigger("ui:enhance",e(this.activePage)),t.loadChildComponents(this.activePage[0])}}}},t}),define(["./xf.core","../ui/xf.ui.core","../ui/xf.ui.button","../ui/xf.ui.checkboxradio","../ui/xf.ui.fieldset","../ui/xf.ui.footer","../ui/xf.ui.header","../ui/xf.ui.list","../ui/xf.ui.loader","../ui/xf.ui.popup","../ui/xf.ui.scrollable","../ui/xf.ui.slidemenu","../ui/xf.ui.tabs","../ui/xf.ui.textinput"],function(t){return t}),define(["./xf.core"],function(t){return t.settings={appVersion:"1.0.0",noCache:!1,componentUrlPrefix:"js/components/",componentUrlPostfix:".js",componentUrl:function(e){return t.settings.property("componentUrlPrefix")+e+t.settings.property("componentUrlPostfix")},templateUrlPrefix:"tmpl/",templateUrlPostfix:".tmpl",dataUrlPrefix:"",ajaxSettings:{},property:function(t,e){return void 0===e?this[t]:(this[t]=e,void 0)}},t}),define(["./xf.core","./xf.settings"],function(e){return e.storage={storage:null,isAvailable:!1,init:function(){this.storage=t.localStorage;try{this.storage.setItem("check","check"),this.storage.removeItem("check"),this.isAvailable=!0}catch(i){this.isAvailable=!1}var n=this.get("appVersion");e.settings.property("noCache")?(console.log("XF.storage :: init - cache is disable for the whole app manually - clearing storage"),this.set("appVersion",e.settings.property("appVersion"))):n&&n==e.settings.property("appVersion")?console.log("XF.storage :: init - same version is cached - using it as much as possible"):(console.log("XF.storage :: init - wrong or no version cached - clearing storage"),this.clear(),this.set("appVersion",e.settings.property("appVersion")))},get:function(t){var e;if(this.isAvailable)try{e=this.storage.getItem(t),console.log('XF.storage :: get - "'+t+'" = "'+e+'"')}catch(i){e=null}else e=null;return e},set:function(t,e){var i;if(this.isAvailable)try{this.storage.setItem(t,e),i=!0,console.log('XF.storage :: set - "'+t+'" = "'+e+'"')}catch(n){i=!1}else i=!1;return i},clear:function(){var t;if(this.isAvailable)try{this.storage.clear(),t=!0,console.log("XF.storage :: clear")}catch(e){t=!1}else t=!1;return t}},e}),define(["./xf.core","jquery","underscore"],function(e,i,n){return e.device={size:{width:0,height:0},isMobile:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test((navigator.userAgent||navigator.vendor||t.opera).toLowerCase()),isIOS:/iphone|ipod|ipad/i.test((navigator.userAgent||navigator.vendor||t.opera).toLowerCase()),types:[{name:"desktop",range:{max:null,min:1025},templatePath:"desktop/",fallBackTo:"tablet"},{name:"tablet",range:{max:1024,min:480},templatePath:"tablet/",fallBackTo:"mobile"},{name:"mobile",range:{max:480,min:null},templatePath:"mobile/",fallBackTo:"default"}],defaultType:{name:"default",range:{min:null,max:null},templatePath:"",fallBackTo:null},type:this.defaultType,init:function(t){this.types=t||this.types,this.detectType(),this.detectTouchable()},supports:{touchEvents:!1,pointerEvents:t.navigator.msPointerEnabled,cssAnimations:function(){var t="Webkit Moz O ms Khtml".split(" "),e=document.createElement("div");if(e.style.animationName)return{prefix:""};for(var i=0;t.length>i;i++)if(void 0!==e.style[t[i]+"AnimationName"])return{prefix:"-"+t[i].toLowerCase()+"-"};return!1}()},detectType:function(){this.size.width=i(t).width(),this.size.height=i(t).height(),console.log('XF.DeviceClass :: detectType - width = "'+this.size.width+'"'),console.log('XF.DeviceClass :: detectType - height = "'+this.size.height+'"');var e=Math.max(this.size.width,this.size.height);console.log('XF.DeviceClass :: detectType - maxSide = "'+e+'"');var a=null;n.each(this.types,function(t){try{(!t.range.min||t.range.min&&e>t.range.min)&&(!t.range.max||t.range.max&&t.range.max>e)&&(a=t)}catch(i){console.log("XF.DeviceClass :: detectType - bad type detected - skipping"),console.log("XF.DeviceClass :: detectType - @dev: plz verify types list")}}),a?this.type=a:(this.type=this.defaultType,console.log("XF.DeviceClass :: detectType - could not choose any of device type"),console.log("XF.DeviceClass :: detectType - drop back to this.defaultType"),console.log("XF.DeviceClass :: detectType - @dev: plz verify types list")),console.log('XF.DeviceClass :: detectType - selected type "'+this.type.name+'"')},getTypeByName:function(t){var e=null;return n.each(this.types,function(i){try{i.name==t&&(e=i)}catch(n){console.log("XF.DeviceClass :: getTypeByName - bad type name - skipping"),console.log("XF.DeviceClass :: getTypeByName - @dev: plz verify types list")}}),e},detectTouchable:function(){var e=" -webkit- -moz- -o- -ms- ".split(" "),i=["@media (",e.join("touch-enabled),("),"app_device_test",")","{#touch{top:9px;position:absolute}}"].join(""),n=this;this.injectElementWithStyles(i,function(e){var i=document.styleSheets[document.styleSheets.length-1],a=(i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"",e.childNodes),s=a[0];n.supports.touchEvents="ontouchstart"in t||t.DocumentTouch&&document instanceof DocumentTouch||9===(s&&s.offsetTop)},1,["touch"]),console.log("XF.device :: detectTouchable - device IS "+(this.supports.touchEvents?"":"NOT ")+"touchable")},injectElementWithStyles:function(t,e,i,n){var a,s,o,r=document.createElement("div"),l=document.body,c=l?l:document.createElement("body");if(parseInt(i,10))for(;i--;)o=document.createElement("div"),o.id=n?n[i]:"app_device_test"+(i+1),r.appendChild(o);return a=["&#173;","<style>",t,"</style>"].join(""),r.id="app_device_test",c.innerHTML+=a,c.appendChild(r),l||(c.style.background="",docElement.appendChild(c)),s=e(r,t),l?r.parentNode.removeChild(r):c.parentNode.removeChild(c),!!s},ORIENTATION_PORTRAIT:"portrait",ORIENTATION_LANDSCAPE:"landscape",getOrientation:function(){var t=!0,e=document.documentElement;return void 0!==i.support||(t=e&&1.1>e.clientWidth/e.clientHeight),t?this.ORIENTATION_PORTRAIT:this.ORIENTATION_LANDSCAPE},getScreenHeight:function(){var e=this.getOrientation(),n=e===this.ORIENTATION_PORTRAIT,a=n?480:320,s=n?screen.availHeight:screen.availWidth,o=Math.max(a,i(t).height()),r=Math.min(s,o);return r},getViewport:function(){var t=i("body").addClass("xf-viewport");return t[0]||(t=i(".xf-page").eq(0),t=t.length?t.parent():i("body"),t.addClass("xf-viewport")),t.eq(0)}},e}),define(["./xf.core","jquery","underscore","backbone","./xf.settings"],function(t,e,i,n){return t.Collection=n.Collection.extend({_initProperties:function(){this.status={loaded:!1,loading:!1,loadingFailed:!1},i.has(this,"root")||(this.root=null),i.has(this,"ajaxSettings")||(this.ajaxSettings=null),this.component=null},_bindListeners:function(){this.on("refresh",this.refresh,this)},constructor:function(a,s){if(this._initProperties(),this._bindListeners(),s||(s={}),s.component&&(this.component=s.component),i.omit(s,"component"),this.url=this.url||t.settings.property("dataUrlPrefix").replace(/(\/$)/g,"")+"/"+(i.has(this,"component")&&null!==this.component&&i.has(this.component,"name")?this.component.name+"/":""),i.has(this,"component")&&null!==this.component&&this.component.options.updateOnShow&&e(this.component.selector()).bind("show",i.bind(this.refresh,this)),this.ajaxSettings=this.ajaxSettings||i.defaults({},t.settings.property("ajaxSettings")),i.has(this.ajaxSettings,"success")&&i.isFunction(this.ajaxSettings.success)){var o=i.bind(this._onDataLoaded,this),r=this.ajaxSettings.success;this.ajaxSettings.success=function(){o(),r()}}else this.ajaxSettings.success=i.bind(this._onDataLoaded,this);n.Collection.apply(this,arguments)},initialize:function(){},construct:function(){},refresh:function(){this.status.loaded=!1,this.status.loading=!0,this.reset(),this.ajaxSettings.silent=!1,this.fetch(this.ajaxSettings)},fetch:function(t){return t=i.defaults(t||{},this.ajaxSettings),Backbone.Collection.prototype.fetch.call(this,t)},_onDataLoaded:function(){console.log("data loaded",this),this.status.loaded=!0,this.status.loading=!1,this.trigger("fetched")}}),t}),define(["./xf.core","jquery","underscore","backbone","./xf.settings"],function(t,e,i,n){return t.Model=n.Model.extend({_initProperties:function(){this.status={loaded:!1,loading:!1,loadingFailed:!1},i.has(this,"root")||(this.root=null),i.has(this,"ajaxSettings")||(this.ajaxSettings=null),this.component=null},_bindListeners:function(){this.on("refresh",this.refresh,this)},constructor:function(a,s){if(this._initProperties(),this._bindListeners(),s||(s={}),s.component&&(this.component=s.component),i.omit(s,"component"),this.urlRoot=this.urlRoot||t.settings.property("dataUrlPrefix").replace(/(\/$)/g,"")+"/"+(i.has(this,"component")&&null!==this.component&&i.has(this.component,"name")?this.component.name+"/":""),i.has(this,"component")&&null!==this.component&&this.component.options.updateOnShow&&e(this.component.selector()).bind("show",i.bind(this.refresh,this)),this.ajaxSettings=this.ajaxSettings||t.settings.property("ajaxSettings"),i.has(this.ajaxSettings,"success")&&i.isFunction(this.ajaxSettings.success)){var o=this.ajaxSettings.success,r=i.bind(this._onDataLoaded,this);this.ajaxSettings.success=function(){r(),o()}}else this.ajaxSettings.success=i.bind(this._onDataLoaded,this);n.Model.apply(this,arguments)},initialize:function(){},construct:function(){},refresh:function(){this.status.loaded=!1,this.status.loading=!0,this.fetch(this.ajaxSettings)},fetch:function(t){return t=i.defaults(t||{},this.ajaxSettings),Backbone.Collection.prototype.fetch.call(this,t)},_onDataLoaded:function(){this.status.loaded=!0,this.status.loading=!1,this.trigger("fetched")}}),t}),define(["./xf.core","jquery","underscore","backbone","./xf.settings","./xf.storage","./xf.device"],function(t,e,i,n){return t.View=n.View.extend({url:function(){return t.settings.property("templateUrlPrefix")+t.device.type.templatePath+this.component.name+t.settings.property("templateUrlPostfix")},_bindListeners:function(){this.component.options.autorender&&(this.component.collection?this.listenTo(this.component.collection,"fetched",this.refresh):this.component.model&&this.listenTo(this.component.model,"fetched",this.refresh)),this.on("refresh",this.refresh,this)},_initProperties:function(){var t={src:null,compiled:null,cache:!0};this.template=this.template||{},console.log("VIEW OPTIONS",this.template),this.template=i.defaults(this.template,t),console.log("VIEW OPTIONS",this.template),this.status={loaded:!1,loading:!1,loadingFailed:!1},this.component=null},constructor:function(t){this._initProperties(),this.setElement("[data-id="+t.attributes["data-id"]+"]",!1),t.component&&(this.component=t.component),i.omit(t,"component"),this._bindListeners(),this.load(),n.View.apply(this,arguments)},initialize:function(){},construct:function(){},load:function(){if(this.template.src)return this.status.loading=!1,this.status.loaded=!0,this.trigger("loaded"),void 0;var n=i.isFunction(this.url)?this.url():this.url;if(!n)return this.status.loadingFailed=!0,this.trigger("loaded"),void 0;if(!t.settings.noCache&&this.template.cache&&i.has(t,"storage")){var a=t.storage.get(n);if(a)return this.template.src=a,this.status.loaded=!0,this.trigger("loaded"),void 0}if(!this.status.loaded&&!this.status.loading){this.status.loading=!0;var s=this;e.ajax({url:n,complete:function(e,a){if(!s.component)throw'XF.View "component" linkage lost';if("success"==a){var o=e.responseText;t.settings.noCache||s.template.cache&&i.has(t,"storage")&&t.storage.set(n,o),s.template.src=e.responseText,s.status.loading=!1,s.status.loaded=!0,s.afterLoadTemplate(),s.trigger("loaded")}else s.template.src=null,s.status.loading=!1,s.status.loaded=!1,s.status.loadingFailed=!0,s.afterLoadTemplateFailed(),s.trigger("loaded")}})}},getMarkup:function(){var t={};return this.template.compiled||(this.template.compiled=i.template(this.template.src)),this.component.collection?t=this.component.collection.toJSON():this.component.model&&(t=this.component.model.toJSON()),this.template.compiled({data:t,options:this.component.options})},beforeLoadTemplate:function(){},afterLoadTemplate:function(){},afterLoadTemplateFailed:function(){console.log('XF.View :: afterLoadTemplateFailed - could not load template for "'+this.component.id+'"'),console.log("XF.View :: afterLoadTemplateFailed - @dev: verify XF.device.types settings & XF.View :: getTemplate URL overrides")},refresh:function(){console.log(this.component.id,"REFRESHED VIEW"),this.status.loaded&&this.template.src&&(!this.component.collection&&!this.component.model||this.component.collection&&this.component.collection.status.loaded||this.component.model&&this.component.model.status.loaded)&&(console.log(this.component.id,"RENDERED VIEW",this.component.collection),this.beforeRender(),this.render(),this.afterRender())},beforeRender:function(){},renderVersion:0,render:function(){return this.component&&this.component._removeChildComponents(),this.$el.html(this.getMarkup()),t.trigger("ui:enhance",this.$el),this.renderVersion++,console.log("RENDERED",this.component.id),this.trigger("rendered"),this},afterRender:function(){}}),t}),define(["./xf.core","underscore","backbone"],function(t,i,n){return t.Component=function(e,n){this.name=e||"default_name",this.id=n||"default_id",this.options=i.defaults(t.getOptionsByID(this.id),this.options,this.defaults)},i.extend(t.Component.prototype,t.Events),i.extend(t.Component.prototype,{defaults:{autoload:!0,autorender:!0,updateOnShow:!1},options:{},selector:function(){return"[data-id="+this.id+"]"},Model:null,model:null,Collection:t.Collection,collection:null,View:t.View,view:null,_bindListeners:function(){t.on("component:"+this.id+":refresh",this.refresh,this),this.listenTo(this,"refresh",this.refresh)},initialize:function(){},construct:function(){},_constructor:function(){if(this.construct(),t.trigger("component:"+this.id+":constructed"),this.Collection?(this.collection=new this.Collection({},{component:this}),this.collection.construct()):this.Model&&(this.model=new this.Model({},{component:this}),this.model.construct()),this.View){var e={attributes:{"data-id":this.id},component:this};this.collection?e.collection=this.collection:this.model&&(e.model=this.model),this.view=new this.View(e),this.view.construct()}this._bindListeners(),this.initialize(),this.view&&(this.view.listenToOnce(this.view,"loaded",this.view.refresh),this.view.on("rendered",i.bind(function(){t.trigger("component:"+this.id+":rendered")},this))),this.collection&&this.options.autoload?this.collection.refresh():this.model&&this.options.autoload?this.model.refresh():this.view&&this.view.refresh()},_removeChildComponents:function(){if(this.view){var i=[];this.view.$el.find("[data-component]").each(function(){i.push(e(this).data("id"))}),t._removeComponents(i)}},refresh:function(){this.collection&&!this.collection.status.loading?this.collection.refresh():this.model&&!this.model.status.loading?this.model.refresh():this.view&&!this.view.status.loading&&this.view.refresh()}}),t.Component.extend=n.Model.extend,t}),define(["jquery","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e){e.ui.button={selector:"A[data-role=button], BUTTON, INPUT[type=submit], INPUT[type=reset], INPUT[type=button], [data-appearance=backbtn]",render:function(i,n){var a,s,o=t(i);if(n||(n={}),i&&o instanceof t&&"true"!=o.attr("data-skip-enhance")){if("A"==i.nodeName||"BUTTON"==i.nodeName)a=o.attr({"data-skip-enhance":!0}),s=o.html(),o.html("");else{if("INPUT"!=i.nodeName)return;a=t("<div></div>").append(o.clone().addClass("xf-input-hidden").attr({"data-skip-enhance":!0})),o.hasOwnProperty("outerHtml")&&o.outerHtml(a),s=o.attr("value")}var r="object"==typeof n&&n.small===!0?!0:"object"==typeof n&&"backbtn"==n.appearance?!0:!1,l="object"==typeof n&&"position"in n?n.position:"",c=o.attr("id")||e.utils.uniqueID();if(""!==l&&a.addClass("xf-button-float-"+l),o.parents(e.ui.header.selector).length>0){var d=l||"right";a.addClass("xf-button-header-"+d),a.addClass("xf-button-float-"+d)}a.addClass(r?"xf-button-small":"xf-button"),"object"==typeof n&&"backbtn"===n.appearance&&a.addClass("xf-button-back");var u="object"==typeof n&&n.icon?n.icon:!1;if("object"==typeof n&&"backbtn"===n.appearance&&(u="left"),u){var p=t("<span class=xf-icon></span>");p.addClass("xf-icon-"+u),r?p.addClass("xf-icon-small"):p.addClass("xf-icon-big");var h="object"==typeof n&&n.iconpos?n.iconpos:"left";"left"!=h&&"right"!=h&&"top"!=h&&"bottom"!=h&&(h="left"),a.addClass("xf-iconpos-"+h),a.append(p)}if(s){var f=t("<span></span>").append(s);r||"backbtn"==n.appearance?f.addClass("xf-button-small-text"):f.addClass("xf-button-text"),a.append(f)}else r&&a.addClass("xf-button-small-icon-only");n.special===!0&&a.addClass("xf-button-special"),n.alert===!0&&a.addClass("xf-button-alert"),a.attr("id",c)}}}}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.checkboxRadio={selector:"INPUT[type=checkbox], INPUT[type=radio]",render:function(n){var a=t(n),s={id:"",input:"",wrapperClass:"",labelClass:"",labelFor:"",isSwitch:!1,label:""};if(n&&a instanceof t&&"true"!=a.attr("data-skip-enhance")){a.attr({"data-skip-enhance":!0}),s.id=a.attr("id")||i.utils.uniqueID(),s.input=a.wrap("<span></span>").parent().html(),a.attr("id",s.id);var o=t("label[for="+s.id+"]");if(o.length){var r=a.attr("type").toLowerCase(),l=t("<div></div>"),c=s.isSwitch="switch"==a.attr("data-role");c?(s.wrapperClass="xf-switch",s.labelClass="xf-switch-control",o.addClass("xf-switch-label")):(s.wrapperClass="xf-input-"+r,s.labelClass="xf-input-positioner",o.addClass("xf-input-label")),l.append(o),s.labelFor=o.wrap("<span></span>").parent().html();var d=e.template('<div class="<%= options.wrapperClass %>"><label for="<%= options.id %>" class="<%= options.labelClass %>"><%= options.input %><% if(options.isSwitch) { %><span class=xf-switch-track><span class=xf-switch-track-wrap><span class=xf-switch-thumb></span></span></span><% } %></label><%= options.labelFor %></div>');a.parent().html(d({options:s}))}}}}}),define(["../src/xf.core","jquery","underscore"],function(t,e,i){return t.ui={},i.extend(t.ui,{init:function(){t.on("ui:enhance",i.bind(t.ui.enhance,t.ui))},enhance:function(n){(n instanceof e||(n=e(n),!(!n instanceof e)))&&i.each(t.ui,function(a){"object"==typeof a&&a.hasOwnProperty("selector")&&n.find(a.selector).not("[data-skip-enhance=true]").each(function(){var n=!1;if(i.each(t.ui.enhanced,function(e,i){t.ui.enhanced[i]===this&&(n=!0)}),!n&"true"!=e(this).attr("data-skip-enhance")){var s=e(this).data();t.ui.enhanced.push(this),a.render(this,s)}})})},enhanced:[],issetElements:[],checkInIsset:function(t,e){t=t||"",e=e||"";
var i=[];for(var n in this.issetElements)""===e?this.issetElements[n].type===t&&i.push(this.issetElements[n].id):this.issetElements[n].type===t&&this.issetElements[n].id===e&&i.push(this.issetElements[n].id);return i},removeFromIsset:function(t,e){t=t||"",e=e||"";var i=[];for(var n in this.issetElements)""===e?this.issetElements[n].type!==t&&i.push(this.issetElements[n]):this.issetElements[n].type!==t&&this.issetElements[n].id!==e&&i.push(this.issetElements[n]);this.issetElements=i}}),t}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.fieldset={selector:"fieldset[data-role=controlgroup]",render:function(n){var a=t(n);if(n&&a instanceof t&&"true"!=a.attr("data-skip-enhance")){var s=a.attr("id")||i.utils.uniqueID();a.attr({"data-skip-enhance":!0,id:s}),a.addClass("xf-controlgroup");var o=a.children("legend").detach();if(a.wrapInner('<div class="xf-controlgroup-controls">'),a.prepend(o),o.length){var r=t("<div></div>"),l={};e.each(o[0].attributes,function(t){l[t.name]=t.value}),r.attr(l).addClass("xf-label").html(o.html()),o.hasOwnProperty("outerHTML")&&o.outerHtml(r.outerHtml())}}}}}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.footer={selector:"footer, [data-role=footer]",render:function(n,a){var s=t(n);if(n&&s instanceof t&&"true"!=s.attr("data-skip-enhance")){a.id=a.id||i.utils.uniqueID(),s.attr({"data-id":a.id,id:a.id,"data-role":"footer","data-skip-enhance":"true"}),a.fixed=a.fixed===!0?!0:!1,a.buttons=a.buttons||[];var o=t(this.selector).parents(".xf-page"),r=t(this.selector).siblings(".xf-page");!e.isEmpty(o)&&a.isFixed&&o.addClass("xf-has-footer"),e.isEmpty(r)||r.addClass("xf-has-footer");var l=s.find(i.ui.button.selector);a.buttonsClass="xf-grid-unit-1of"+l.length;for(var c=0;l.length>c;++c){var d=l.eq(c),u={iconClass:d.attr("data-icon")?"xf-icon-"+d.attr("data-icon"):"",dataHrefString:d.attr("data-href")?d.attr("data-href"):"",textClass:d.attr("data-text-class")?d.attr("data-text-class"):"",id:d.attr("data-id")?d.attr("data-id"):a.id+"-item"+c,text:d.val()||d.text()||""};a.buttons.push(u)}i.router.on("route",function(){i.ui.footer.selectButton(s)});var p=e.template('<div class="xf-footer <% if(fixed) { %> xf-footer-fixed <% } %>"><ul class="xf-nav"><% _.each(buttons, function(button) { %><li class="xf-grid-unit <%= buttonsClass %>"><a data-href="<%= button.dataHrefString %>" class="xf-nav-item xf-iconpos-top" id="<%= button.id %>"><div class="xf-icon xf-icon-big <%= button.iconClass %>"></div><div class="xf-nav-item-text <%= button.textClass %>"><%= button.text %></div></a></li><% }); %></ul></div>');s.html(p(a)),i.ui.footer.selectButton(s)}},selectButton:function(t){var e=i.history.fragment;t.find(".xf-nav a").removeClass("xf-nav-item-active"),t.find('.xf-nav a[data-href="#'+e+'"]').addClass("xf-nav-item-active")}}}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.header={selector:"[data-role=header]",render:function(n,a){var s=t(n);if(n&&s instanceof t&&"true"!=s.attr("data-skip-enhance")){var o=s.find("h1");o.length>0&&o.addClass("xf-header-title"),a.id=a.id||i.utils.uniqueID(),a.title=a.title||"",a.html=s.html(),a.isFixed=a.fixed&&a.fixed===!0?!0:!1;var r=t(this.selector).parents(".xf-page"),l=t(this.selector).siblings(".xf-page");!e.isEmpty(r)&&a.isFixed&&r.addClass("xf-has-header"),e.isEmpty(l)||l.addClass("xf-has-header"),s.attr({"data-id":a.id,id:a.id,"data-skip-enhance":"true"});var c=e.template('<header class="xf-header <% if(isFixed) { %> xf-header-fixed <% } %>"><%= html %></header>');s.html(c(a))}}}}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.list={selector:"UL[data-role=listview], OL[data-role=listview]",render:function(n,a){var s=t(n);if(n&&s instanceof t&&"true"!=s.attr("data-skip-enhance")){var o=s.children("li"),r=o.children("a"),l=[],c=a.fullwidth||"false",d=s.attr("id")||i.utils.uniqueID();r.addClass("xf-li-btn").children(".xf-count-bubble").parent().addClass("xf-li-has-count"),o.not(r.parent()).not("[data-role=divider]").addClass("xf-li-static"),s.attr({"data-skip-enhance":!0,id:d}).addClass("xf-listview").children("li[data-icon]").children("a").each(function(){var e=t(this),i=e.parent().attr("data-icon");e.append(t("<span></span>").addClass("xf-icon xf-icon-big xf-icon-"+i));var n=e.parent().attr("data-iconpos");"left"!=n&&"right"!=n&&(n="right"),e.addClass("xf-li-with-icon-"+n)}),"true"===c&&s.addClass("xf-listview-fullwidth"),r.children("img").parent().each(function(){var e=t(this),i=e.parent().attr("data-thumbpos");"right"!=i&&"left"!=i&&(i="left"),e.addClass("xf-li-with-thumb-"+i),e.children("img").addClass("xf-li-thumb xf-li-thumb-"+i)}),r.each(function(){var e=t(this);e.append(t("<div class=xf-btn-text></div>").append(e.children().not(".xf-icon, .xf-count-bubble, .xf-li-thumb")))}),o.find("h1, h2, h3, h4, h5, h6").addClass("xf-li-header"),o.find("p").addClass("xf-li-desc"),o.filter(".xf-li-static").each(function(){t(this).wrapInner("<div class=xf-li-wrap />")}),t.each(o,function(t){var e=o.eq(t).html(),i=o.eq(t).attr("data-role")||"",n=(o.eq(t).attr("class")||"")+" xf-li",a=o.eq(t).attr("id")||"";""!==i&&(n+=" xf-li-"+i),l.push({html:e,class_:n,id:a})});var u=e.template('<% _.each(listItemsScope, function(item) { %> <li class="<%= item.class_ %>" id="<%= item.id %>"><%= item.html %></li><% }); %>');s.html(u({listItemsScope:l}))}}}}),define(["jquery","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e){e.ui.loader={selector:"[data-role=loader]",render:function(i,n){var a=t(i);if(n||(n={}),i&&a instanceof t&&"true"!=a.attr("data-skip-enhance")){var s=a.attr("id")||e.utils.uniqueID(),o=e.ui.checkInIsset("loader"),r=!1;for(var l in o)r&&(t("#"+o[l]).length||(s=o[l],r=!0));return r||e.ui.issetElements.push({type:"loader",id:s}),a.attr({id:s,"data-skip-enhance":"true"}),t("#"+s).hasClass("xf-loader")||t("#"+s).addClass("xf-loader"),a}},show:function(t){t=t||this.create(),t.show()},hide:function(e){e=e||null,null===e?t(".xf-loader").hide():e.hide()},remove:function(t){t.detach(),e.ui.removeFromIsset("popup",t.attr("id"))},create:function(){var i=t('<div class="xf-loader" data-role="loader"><div class="xf-loader-content"><div class="loading"></div></div></div>');return e.device.getViewport().append(i),this.render(i[0])}}}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.popup={render:function(){var e=i.utils.uniqueID(),n=i.ui.checkInIsset("popup"),a=!1;for(var s in n)a&&(t("#"+n[s]).length||(e=n[s],a=!0));a||i.ui.issetElements.push({type:"popup",id:e});var o=t('<div class="xf-dialog " id="'+e+'"><div class="xf-dialog-content"></div></div>');return o},showDialog:function(t,e,i){var n=this.createDialog(t,e,i);this.show(n)},show:function(t){i.device.getViewport().append(t)},hide:function(t){t.detach(),i.ui.removeFromIsset("popup",t.attr("id"))},createDialog:function(n,a,s){s=s||[];var o=this.render(),r=e.template('<div class="xf-dialog-box"><div class="xf-dialog-box-header"><h3><%= headerText %></h3></div><div class="xf-dialog-box-content"><%= messageText %></div><div class="xf-dialog-box-footer clearfix"></div></div>');o.find(".xf-dialog-content").html(r({headerText:n,messageText:a}));var l=o.find(".xf-dialog-box-footer");if(1>s.length&&s.push({text:"OK",handler:function(){i.UI.popup.hide(o)}}),s.length>0){var c,d=s.length;e.each(s,function(e){e instanceof t?c=e:(console.log("BUTTON"),console.log(e),c=i.ui.popup.createButton(e)),l.append(t("<div></div>").addClass("xf-grid-unit xf-grid-unit-1of"+d).append(c))})}return this.dialog=o,i.trigger("ui:enhance",o),o},createNotification:function(i,n){var a=this.render().addClass("xf-dialog-notification"),s=e.template('<div class="xf-notification"><div class="xf-notification-wrap"><div class="xf-notification-text"><%= messageText %></div></div></div>');return a.find(".xf-dialog-content").html(s({messageText:i})),n&&""!==n&&a.find(".xf-notification-wrap").prepend(t("<div></div>").addClass("xf-notification-icon").append(t("<span></span>").addClass("xf-icon xf-icon-xl xf-icon-"+n))),a},dialog:null,hideDialog:function(){this.dialog&&this.hide(this.dialog)},hideAll:function(){var e=i.ui.checkInIsset("popup");for(var n in e)t("#"+e[n]).length&&this.hide(t("#"+e[n]))},createButton:function(n){var a=t("<button></button>"),s={};return s.id=n.id||i.utils.uniqueID(),s["class"]=n["class"]||"",s.name=n.name||s.id,n.small=n.small||"",a.html(n.text),n.icon&&""!==n.icon&&(s["data-icon"]=n.icon),n.iconpos&&""!==n.iconpos&&(s["data-iconpos"]=n.iconpos),n.small&&""!==n.small&&(s["data-small"]=n.small),n.appearance&&""!==n.appearance&&(s["data-appearance"]=n.appearance),n.special&&""!==n.special&&(s["data-special"]=n.special),n.alert&&""!==n.alert&&(s["data-alert"]=n.alert),a.attr(s),e.isFunction(n.handler)&&a.on("tap",n.handler),i.ui.button.render(a[0]),a}}}),define(["jquery","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e){e.ui.scrollable={selector:"[data-scrollable=true]",render:function(i){var n=t(i);if(i&&n instanceof t&&"true"!=n.attr("data-skip-enhance")){var a=n.attr("id")||e.utils.uniqueID();n.attr({"data-skip-enhance":!0,id:a});var s=n.children();n.append(t("<div></div>").addClass("xf-scrollable-content").append(s));var o=n.attr("id");o&&""!==o||(o="xf_scrollable_"+(new Date).getTime(),n.attr({id:o}));var r=n.data("iscroll",new iScroll(o)),l=!1,c=function(){l&&(l=!1,r.data("iscroll").refresh(),u())},d=function(){t.contains(t("#"+o)[0],this)&&(l=!0,setTimeout(c,100))},u=function(){t("#"+o+" *").bind("detach",d).bind("hide",d).bind("show",d).bind("append",d).bind("prepend",d).bind("html",d).bind("resize",d)};u()}}}}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.slidemenu={selector:"[data-role=slidemenu]",render:function(n,a){var s=t(n);if(n&&s instanceof t&&"true"!=s.attr("data-skip-enhance")){a.id=a.id||i.utils.uniqueID(),a.title=a.title||"",a.hasTitle=""!==a.title?!0:!1,a.isFixed=a.fixed&&a.fixed===!0?!0:!1,a.buttons=a.buttons||[],a.html=s.html(),s.attr({"data-id":a.id,id:a.id,"data-skip-enhance":"true"}).addClass("xf-slidemenu-wrapper");var o='<button class="xf-slidemenu-button xf-button-float-'+s.data("button-position")+" xf-button-header-"+s.data("button-position")+' xf-button-small-icon-only xf-button-small xf-button" data-position="'+s.data("button-position")+'" data-skip-enhance="true"><span class="xf-icon xf-icon-list xf-icon-small"></span></button>',r=t("#"+s.data("button-container"));r.find("header").append(o),a.menuButton='<button class="xf-slidemenu-close-button xf-button-float-'+s.data("button-position")+" xf-button-header-"+s.data("button-position")+' xf-button-small-icon-only xf-button-small xf-button" data-position="'+s.data("button-position")+'" data-skip-enhance="true"><span class="xf-icon xf-icon-cross xf-icon-small"></span></button>';var l=s.find(i.ui.button.selector);a.buttonsClass="";for(var c=0;l.length>c;++c){var d=l.eq(c),u={iconClass:d.attr("data-icon")?"xf-icon-"+d.attr("data-icon"):"",dataHrefString:d.attr("data-href")?d.attr("data-href"):"",textClass:d.attr("data-text-class")?d.attr("data-text-class"):"",id:d.attr("data-id")?d.attr("data-id"):a.id+"-item"+c,"class":d.attr("data-class")||"",text:d.val()||d.text()||""};a.buttons.push(u)}i.router.on("route",function(){i.ui.slidemenu.selectButton(s),t(".xf-slidemenu-wrapper")&&(t(".xf-slidemenu-wrapper").removeClass("xf-slidemenu-show"),t("body").removeClass("blur-page"))});var p=e.template('<div class="xf-slidemenu-scrollable"><div class="xf-slidemenu-header"><%= title %><%= menuButton %></div><%= html %></div>');s.html(p(a)),i.trigger("ui:enhance",s),t(".xf-slidemenu-button").on("tap",function(){return t(".xf-slidemenu-wrapper").addClass("xf-slidemenu-show xf-slidemenu-animation"),t("body").addClass("blur-page xf-viewport-transitioning"),!1}),t(".xf-slidemenu-close-button").on("tap",function(){var e=i.device.isIOS?300:0;return setTimeout(function(){t(".xf-slidemenu-wrapper").removeClass("xf-slidemenu-show"),t("body").removeClass("blur-page xf-viewport-transitioning")},e),!1}),this.selectButton(s)}},selectButton:function(t){var e=""!==i.history.fragment?i.history.fragment:"home";t.find("a").removeClass("xf-slidemenu-item-active"),t.find('a[data-href="#'+e+'"], a[href="#'+e+'"]').addClass("xf-slidemenu-item-active")}}}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.tabs={selector:"[data-role=tabs]",render:function(n,a){var s=t(n);if(n&&s instanceof t&&"true"!=s.attr("data-skip-enhance")){a.id=a.id||i.utils.uniqueID(),a.tabsperrow=a.tabsperrow||4,s.attr({"data-id":a.id,id:a.id,"data-skip-enhance":"true"}),a.tabs=a.tabs||[];var o=s.find(i.ui.button.selector);a.rowCount=Math.ceil(o.length/a.tabsperrow),a.tabsClass=a.tabsclass||"";var r=o.length%a.tabsperrow;r||(r=a.tabsperrow);for(var l=0;o.length>l;++l){var c=o.eq(l),d=l+1,u={className:""};1===d&&(u.className+=" xf-corner-tl "),(d===a.tabsperrow||1==a.rowCount&&l==o.length)&&(u.className+=" xf-corner-tr "),d==o.length+1-r&&(u.className+=" xf-corner-bl "),d===o.length&&(u.className+=" xf-corner-br "),c.attr("data-active")&&(u.className+=" xf-tabs-button-active "),u.gridClass=d>o.length-r?"xf-grid-unit-1of"+r:"xf-grid-unit-1of"+a.tabsperrow,u.id=c.attr("id")||a.id+"-item-"+l,u.text=c.val()||c.text()||"",u.params=c.attr("data-params")||"{}",a.tabs.push(u)}var p=e.template('<ul class="xf-tabs"><% _.each(tabs, function(tab) { %><li class="xf-grid-unit <%= tabsClass %> <%= tab.gridClass %>  "><a data-params="<%= tab.params %>" class="xf-tabs-button <%= tab.className %>" id="<%= tab.id %>"><span class="xf-tabs-button-text"><%= tab.text %></span></a></li><% }); %></ul>');s.html(p(a)),s.find("a").on("tap",function(){i.ui.tabs.selectTab(s,t(this))})}},selectTab:function(t,e){t.find("a").removeClass("xf-tabs-button-active"),e.addClass("xf-tabs-button-active")}}}),define(["jquery","underscore","../src/xf.core","../src/xf.utils","../ui/xf.ui.core"],function(t,e,i){i.ui.input={selector:"INPUT[type=text], INPUT[type=search], INPUT[type=tel], INPUT[type=url], INPUT[type=email], INPUT[type=password], INPUT[type=datetime], INPUT[type=date], INPUT[type=month], INPUT[type=week], INPUT[type=time], INPUT[type=datetime-local], INPUT[type=number], INPUT[type=color], TEXTAREA, INPUT[type=range], INPUT[type=search]",render:function(n,a){var s=t(n),o={start:"mousedown touchstart MSPointerDown",move:"mousemove touchmove MSPointerMove",end:"mouseup touchend MSPointerUp"};if(n&&s instanceof t&&"true"!=s.attr("data-skip-enhance")){s.attr({"data-skip-enhance":!0}),s.addClass("xf-input-text");var r,l="INPUT"==n.nodeName,c=s.attr("type");if("search"==c)r=t('<input type="text"/>'),f={},e.each(n.attributes,function(t){"type"!=t.name&&(f[t.name]=t.value)}),r.attr(f),s.hasOwnProperty("outerHTML")&&s.outerHtml(r),s=r,n=r[0];else if("number"==c||"range"==c){var d=s.attr("min"),u=s.attr("max"),p=parseFloat(s.attr("value")),h=parseFloat(s.attr("step"))||1,f={};r=t('<input type="text"/>'),e.each(n.attributes,function(t){"type"!=t.name&&(f[t.name]=t.value)}),r.attr(f),r.attr({"data-skip-enhance":!0});var m=t("<div></div>").addClass("xf-input-number");m.append(t('<button type="button"></button>').addClass("xf-input-number-control xf-input-number-control-decrease").attr({"data-skip-enhance":!0}).append(t("<span></span>").addClass("xf-icon xf-icon-big xf-icon-circled-minus"))),m.append(r),m.append(t('<button type="button"></button>').addClass("xf-input-number-control xf-input-number-control-increase").attr({"data-skip-enhance":!0}).append(t("<span></span>").addClass("xf-icon xf-icon-big xf-icon-circled-plus")));var g=null;if("number"==c)s.outerHtml(m),s=m,n=m[0];else if("range"==c&&(g=t("<div></div>").addClass("xf-range"),g.append(m),(d||0===d)&&(u||0===u))){d=parseFloat(d),u=parseFloat(u);var v=e.template('<div class="xf-input-range"><div class="xf-range-wrap"><div class="xf-input-range-min"><%= minValue %></div><div class="xf-input-range-slider"><div class="xf-input-range-track"><div class="xf-input-range-value" style="width: 0"><div class="xf-input-range-control" tabindex="0"><div class="xf-input-range-thumb" style="left:100%" title="<%= selValue %>"></div></div></div></div></div><div class="xf-input-range-max"><%= maxValue %></div></div></div>');g.append(v({minValue:d,maxValue:u,selValue:p})),s.outerHtml(g),s=g,n=g[0]}var x=function(t){var e=t%h,i=t-e;if(e>h/2&&(i+=h),t=i,(u||0===u)&&t>u&&(t=u),(d||0===d)&&d>t&&(t=d),p=t,r.attr({value:t}),g){g.find("div.xf-input-range-thumb").attr({title:t});var n=100*(t-d)/(u-d);g.find("div.xf-input-range-value").css({width:""+n+"%"})}},b=function(){var t=parseFloat(r.attr("value"));t+=h,x(t)},y=function(){var t=parseFloat(r.attr("value"));t-=h,x(t)};m.find("button.xf-input-number-control-decrease").on("tap",y),m.find("button.xf-input-number-control-increase").on("tap",b);var C,w=r.attr("value"),T=function(){C=r.attr("value"),w!=C&&(C=parseFloat(C),isNaN(C)&&(C=d),w=C,x(C))};if(r.change(T).focus(T).focusout(T),g){var k,E,P,I,N,S,j=function(t){return k||(k=g.find("div.xf-input-range-track")[0].clientWidth),t/k*(u-d)},F=function(t){return j(t)+d},D=function(e){I=i.device.supports.touchEvents?e.originalEvent.targetTouches[0].pageX:e.pageX||e.clientX||layerX||e.screenX,E=p,t(document).bind(o.end,O),t(document).bind(o.move,_)},_=function(t){N=i.device.supports.touchEvents?t.originalEvent.targetTouches[0].pageX:t.pageX||t.clientX||layerX||t.screenX,S=N-I,P=j(S),I=N,E+=P,x(E)},O=function(){t(document).bind(o.end,O),t(document).bind(o.move,_)},A=function(){t(document).bind("keydown",q)},q=function(t){switch(t.keyCode){case 33:x(p+3*h);break;case 34:x(p-3*h);break;case 35:x(u);break;case 36:x(d);break;case 38:case 39:x(p+h);break;case 37:case 40:x(p-h)}},L=function(){t(document).unbind("keydown",q)};g.find("div.xf-input-range-thumb").bind("mousedown touchstart",D),g.find("div.xf-input-range-control").bind("focus",A).bind("focusout",L);var B=function(t){t.target!=g.find("div.xf-input-range-thumb")[0]&&x(F(t.offsetX))};g.find("div.xf-input-range-track").bind("click",B)}}var U=!1;if("split"==a.appearance&&l){var X=["text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","color"];e.each(X,function(t){c==t&&(U=!0)})}var R="INPUT"===s[0].nodeName?s.attr("id"):s.find("input").eq(0).attr("id"),M=R&&R.length?t("label[for="+R+"]"):[];if(M.length)if(U){s.removeClass("xf-input-text").addClass("xf-input-split-input"),M.addClass("xf-input-split-label");var V=t("<div></div>").addClass("xf-input-split");V.append(t("<div></div>").addClass("xf-grid-unit xf-input-split-part1").append(M)),V.append(t("<div></div>").addClass("xf-grid-unit xf-input-split-part2").append(s.clone())),s.outerHtml(V),s=V,n=V[0]}else M.addClass("xf-label")}}}})}).call(this,window,$,Backbone);